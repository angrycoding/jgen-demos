<!DOCTYPE html>
<html>
	<head>
		<title>jGen - JavaScript game engine - demo page</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<style type="text/css">
			html, body {
				width: 100%;
				height: 100%;
				margin: 0px;
				padding: 0px;
				position: absolute;
			}
		</style>
		<script type="text/javascript" src="script/jsface.js"></script>
		<script type="text/javascript" src="script/jquery-1.8.2.min.js"></script>
		<script type="text/javascript" src="https://raw.github.com/angrycoding/jgen/master/src/Sprite.js"></script>
		<script type="text/javascript" src="https://raw.github.com/angrycoding/jgen/master/src/Renderer.js"></script>
		<script type="text/javascript">

			var renderer = new Renderer();
			renderer.setMapSize(20, 20);
			renderer.setTileSize(65, 65);

			renderer.setTileDefinition(1, 'media/tile0.png');
			renderer.setTileDefinition(2, 'media/tile1.png');
			renderer.setTileDefinition(3, 'media/tile2.png');
			renderer.setTileDefinition(4, 'media/tile3.png');

			renderer.setTileDefinition(5, 'media/tree.png', 0, 0);
			renderer.setTileDefinition(6, 'media/tree.png', 64, 0);
			renderer.setTileDefinition(7, 'media/tree.png', 0, 64);
			renderer.setTileDefinition(8, 'media/tree.png', 64, 64);
			renderer.setTileDefinition(9, 'media/tree.png', 0, 128);
			renderer.setTileDefinition(10, 'media/tree.png', 64, 128);

			renderer.setTileDefinition(11, 'media/pipe.png', 0, 0);
			renderer.setTileDefinition(12, 'media/pipe.png', 64, 0);
			renderer.setTileDefinition(13, 'media/pipe.png', 0, 64);
			renderer.setTileDefinition(14, 'media/pipe.png', 64, 64);

			renderer.addLayer([
				[2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1],
				[2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1],
				[2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1],
				[2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 1, 1, 1, 1],
				[2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[3, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[3, 3, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[3, 3, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[3, 3, 3, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
			]);

			renderer.addLayer([
				[0, 0, 0, 0, 5, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 7, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 5, 6, 0, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 12, 0],
				[0, 7, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 13, 14, 0],
				[0, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 12, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 5, 6, 0, 13, 14, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 7, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 5, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 7, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 9, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
			]);

			var keyPressed = {};
			var cameraX = 0, cameraY = 0;

			$(document).on('keydown', function(event) {
				keyPressed[event.which] = true;
			});

			$(document).on('keyup', function(event) {
				delete keyPressed[event.which];
			});

			var sprite = new Sprite(64, 64);
			renderer.addSprite(sprite);

			var step = 2;

			function render() {
				if (keyPressed[37]) cameraX -= step;
				if (keyPressed[38]) cameraY -= step;
				if (keyPressed[39]) cameraX += step;
				if (keyPressed[40]) cameraY += step;
				var f = renderer.render(cameraX, cameraY);
				sprite.setPosition(f[0], f[1]);
			}

			renderer.setCamera(320 - 32, 320 - 32);
			$(document).ready(function() {
				renderer.setViewPort(document.body, 640, 640);
				setInterval(render, 0);
			});


		</script>
	</head>
	<body>
	</body>
</html>